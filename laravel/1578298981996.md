
# 服務容器

## Reference

[服務容器（Container） - Laravel - 為網頁藝術家創造的 PHP 框架](https://laravel.tw/docs/5.3/container)



## 基本用法

```
interface Fruit{
    public function color();
}

class Apple implements Fruit{
    public $color;
    public $name = 'default';
    public function __construct($color)
    {
        $this->color = $color;
    }
    public function color(){
        return $this->color;
    }
}

class Banana implements Fruit{
    public $color;
    public function __construct($color)
    {
        $this->color = $color;
    }
    public function color(){
        return $this->color;
    }
}
```

```
app()->bind('Fruit', function(){
    return new Apple('red');
});
```

```
echo app('Fruit')->color();
```


## 基礎綁定

```
app()->bind('Fruit', function(){
    return new Apple('red');
});
```

```
echo app('Fruit')->color();
```

> output

```
red
```

## 綁定「單例」

```
app()->singleton('Fruit', function(){
        return new Apple('red');
});
```

```
$obj1 = app('Fruit');
$obj2 = app('Fruit');

$obj1->name= 'aaa';
echo $obj1->name;
echo " ::: ";
echo $obj2->name;
```

**output**

```
aaa:::aaa
```


## 綁定「實例」

```
$fruit =  new Apple('red');
app()->instance('Fruit', $fruit);
```

**output**

```
echo (\resolve('Fruit'))->color();
```


## 綁定實例時，納定初始化數據

```
app()->bind(Fruit::class, Apple::class);
app()->when(Apple::class)->needs('$color')->give('green');
```

```
echo app(Fruit::class)->color();
```

**output**

```
green
```